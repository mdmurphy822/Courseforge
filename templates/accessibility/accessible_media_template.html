<!--
    Accessible Media Template
    WCAG 2.2 AA Compliant

    Features:
    - Video with captions and audio descriptions
    - Audio with transcripts
    - Images with comprehensive alt text
    - Interactive diagrams with descriptions
    - Embedded content with titles
-->

<!-- Video with Captions -->
<section aria-labelledby="video-heading">
    <h2 id="video-heading">Video: {{VIDEO_TITLE}}</h2>

    <figure class="media-container">
        <div class="embed-responsive embed-responsive-16by9">
            <video class="embed-responsive-item"
                   controls
                   preload="metadata"
                   poster="{{VIDEO_POSTER}}"
                   aria-describedby="video-description">
                <source src="{{VIDEO_SRC_MP4}}" type="video/mp4">
                <source src="{{VIDEO_SRC_WEBM}}" type="video/webm">

                <!-- Captions Track -->
                <track kind="captions"
                       src="{{CAPTIONS_SRC}}"
                       srclang="en"
                       label="English captions"
                       default>

                <!-- Audio Description Track (for users who need narration of visual content) -->
                <track kind="descriptions"
                       src="{{DESCRIPTIONS_SRC}}"
                       srclang="en"
                       label="Audio descriptions">

                <!-- Fallback message -->
                <p>Your browser does not support HTML5 video.
                   <a href="{{VIDEO_DOWNLOAD_LINK}}">Download the video</a> instead.</p>
            </video>
        </div>

        <figcaption>
            <p id="video-description">
                {{VIDEO_DESCRIPTION}}
            </p>
            <details class="mt-2">
                <summary>View Video Transcript</summary>
                <div class="transcript-content p-3 bg-light mt-2">
                    {{VIDEO_TRANSCRIPT}}
                </div>
            </details>
        </figcaption>
    </figure>
</section>

<!-- Audio with Transcript -->
<section aria-labelledby="audio-heading" class="mt-4">
    <h2 id="audio-heading">Audio: {{AUDIO_TITLE}}</h2>

    <figure class="media-container">
        <audio controls
               preload="metadata"
               aria-describedby="audio-description">
            <source src="{{AUDIO_SRC_MP3}}" type="audio/mpeg">
            <source src="{{AUDIO_SRC_OGG}}" type="audio/ogg">

            <!-- Fallback message -->
            <p>Your browser does not support HTML5 audio.
               <a href="{{AUDIO_DOWNLOAD_LINK}}">Download the audio file</a>.</p>
        </audio>

        <figcaption>
            <p id="audio-description">
                {{AUDIO_DESCRIPTION}}
            </p>
            <details class="mt-2">
                <summary>View Audio Transcript</summary>
                <div class="transcript-content p-3 bg-light mt-2">
                    {{AUDIO_TRANSCRIPT}}
                </div>
            </details>
        </figcaption>
    </figure>
</section>

<!-- Image with Comprehensive Alt Text -->
<section aria-labelledby="image-heading" class="mt-4">
    <h2 id="image-heading">Diagram: {{DIAGRAM_TITLE}}</h2>

    <figure class="media-container">
        <img src="{{DIAGRAM_SRC}}"
             alt="{{DIAGRAM_ALT}}"
             class="img-fluid"
             loading="lazy"
             aria-describedby="diagram-longdesc">

        <figcaption>
            <p><strong>Figure 1:</strong> {{DIAGRAM_CAPTION}}</p>

            <!-- Long description for complex images -->
            <details id="diagram-longdesc">
                <summary>Detailed Description of Diagram</summary>
                <div class="p-3 bg-light mt-2">
                    <p>{{DIAGRAM_LONG_DESCRIPTION}}</p>

                    <!-- For data visualizations, provide data table -->
                    <h3 class="h5">Data represented in this diagram:</h3>
                    <table class="table table-sm table-bordered">
                        <caption class="sr-only">{{DATA_TABLE_CAPTION}}</caption>
                        <thead>
                            <tr>
                                <th scope="col">{{DATA_COL_1}}</th>
                                <th scope="col">{{DATA_COL_2}}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>{{DATA_ROW_1_COL_1}}</td>
                                <td>{{DATA_ROW_1_COL_2}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </details>
        </figcaption>
    </figure>
</section>

<!-- Decorative vs Informative Image Examples -->
<section aria-labelledby="image-types-heading" class="mt-4">
    <h2 id="image-types-heading">Image Examples</h2>

    <div class="row">
        <!-- Informative Image - needs meaningful alt text -->
        <div class="col-md-6 mb-3">
            <figure>
                <img src="{{INFORMATIVE_IMAGE_SRC}}"
                     alt="Network diagram showing three servers connected to a central router, with firewall between router and internet connection"
                     class="img-fluid rounded">
                <figcaption class="text-center mt-2">
                    Informative image: Alt text describes the information conveyed
                </figcaption>
            </figure>
        </div>

        <!-- Decorative Image - empty alt text -->
        <div class="col-md-6 mb-3">
            <figure>
                <img src="{{DECORATIVE_IMAGE_SRC}}"
                     alt=""
                     role="presentation"
                     class="img-fluid rounded">
                <figcaption class="text-center mt-2">
                    Decorative image: Empty alt text (alt="") and role="presentation"
                </figcaption>
            </figure>
        </div>
    </div>
</section>

<!-- Embedded Content (iframe) -->
<section aria-labelledby="embed-heading" class="mt-4">
    <h2 id="embed-heading">Interactive Resource</h2>

    <figure class="media-container">
        <div class="embed-responsive embed-responsive-4by3">
            <iframe class="embed-responsive-item"
                    src="{{EMBED_SRC}}"
                    title="{{EMBED_TITLE}}"
                    allowfullscreen
                    loading="lazy">
            </iframe>
        </div>
        <figcaption>
            <p>{{EMBED_DESCRIPTION}}</p>
            <p><a href="{{EMBED_ALTERNATIVE_LINK}}">
                View accessible alternative version
                <span class="sr-only">(opens interactive resource in new format)</span>
            </a></p>
        </figcaption>
    </figure>
</section>

<!-- SVG with Accessible Text -->
<section aria-labelledby="svg-heading" class="mt-4">
    <h2 id="svg-heading">SVG Diagram</h2>

    <figure class="media-container">
        <svg role="img"
             aria-labelledby="svg-title svg-desc"
             viewBox="0 0 400 200"
             class="img-fluid">
            <title id="svg-title">{{SVG_TITLE}}</title>
            <desc id="svg-desc">{{SVG_DESCRIPTION}}</desc>

            <!-- SVG content -->
            <rect x="10" y="10" width="380" height="180" fill="#f8f9fa" stroke="#dee2e6"/>
            <text x="200" y="100" text-anchor="middle" fill="#495057">
                SVG Content Here
            </text>
        </svg>
        <figcaption>
            {{SVG_CAPTION}}
        </figcaption>
    </figure>
</section>

<!-- Accessible Media Styles -->
<style>
    .media-container {
        margin-bottom: 2rem;
    }

    .media-container figcaption {
        padding: 1rem 0;
        font-size: 0.95rem;
        color: #495057;
    }

    /* Transcript styling */
    .transcript-content {
        max-height: 400px;
        overflow-y: auto;
        border: 1px solid #dee2e6;
        border-radius: 4px;
    }

    /* Details/Summary styling */
    details {
        margin-top: 0.5rem;
    }

    details summary {
        cursor: pointer;
        color: #2c5aa0;
        font-weight: 500;
        padding: 0.5rem 0;
    }

    details summary:hover {
        text-decoration: underline;
    }

    /* WCAG 2.2 2.4.13 Focus Appearance - minimum 2px outline with 3:1 contrast */
    details summary:focus {
        outline: 2px solid #2c5aa0;
        outline-offset: 2px;
    }

    /* Video/Audio controls focus */
    video:focus,
    audio:focus {
        outline: 2px solid #2c5aa0;
        outline-offset: 2px;
    }

    /* WCAG 2.2 2.5.8 Target Size (Minimum) - 24x24 CSS pixels */
    a, button, summary, [role="button"], [tabindex="0"] {
        min-height: 24px;
        min-width: 24px;
    }

    /* WCAG 2.2 2.4.11/2.4.12 Focus Not Obscured */
    *:focus {
        scroll-margin-top: 80px;
        scroll-margin-bottom: 80px;
    }

    /* Screen reader only */
    .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
        .transcript-content {
            max-height: 250px;
        }
    }
</style>
