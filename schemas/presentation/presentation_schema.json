{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://slideforge.dev/schemas/presentation.json",
  "title": "Slideforge Presentation Schema",
  "description": "Schema for structured presentation content that generates PPTX files",
  "type": "object",
  "properties": {
    "metadata": {
      "type": "object",
      "description": "Presentation metadata",
      "properties": {
        "title": {
          "type": "string",
          "description": "Presentation title (appears on title slide)"
        },
        "subtitle": {
          "type": "string",
          "description": "Presentation subtitle"
        },
        "author": {
          "type": "string",
          "description": "Presentation author"
        },
        "date": {
          "type": "string",
          "description": "Presentation date"
        },
        "subject": {
          "type": "string",
          "description": "Presentation subject/topic"
        },
        "keywords": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Keywords for searchability"
        }
      },
      "required": ["title"]
    },
    "theme": {
      "type": "object",
      "description": "Theme configuration",
      "properties": {
        "template_path": {
          "type": "string",
          "description": "Path to PPTX template file"
        },
        "colors": {
          "$ref": "#/definitions/themeColors"
        },
        "fonts": {
          "$ref": "#/definitions/themeFonts"
        }
      }
    },
    "sections": {
      "type": "array",
      "description": "Presentation sections",
      "items": {
        "$ref": "#/definitions/section"
      }
    }
  },
  "required": ["metadata", "sections"],
  "definitions": {
    "themeColors": {
      "type": "object",
      "properties": {
        "primary": {
          "type": "string",
          "pattern": "^#[0-9A-Fa-f]{6}$",
          "default": "#2c5aa0"
        },
        "secondary": {
          "type": "string",
          "pattern": "^#[0-9A-Fa-f]{6}$",
          "default": "#28a745"
        },
        "accent": {
          "type": "string",
          "pattern": "^#[0-9A-Fa-f]{6}$",
          "default": "#ffc107"
        },
        "background": {
          "type": "string",
          "pattern": "^#[0-9A-Fa-f]{6}$",
          "default": "#ffffff"
        },
        "text_dark": {
          "type": "string",
          "pattern": "^#[0-9A-Fa-f]{6}$",
          "default": "#333333"
        },
        "text_light": {
          "type": "string",
          "pattern": "^#[0-9A-Fa-f]{6}$",
          "default": "#ffffff"
        }
      }
    },
    "themeFonts": {
      "type": "object",
      "properties": {
        "title": {
          "type": "object",
          "properties": {
            "name": { "type": "string", "default": "Arial" },
            "size": { "type": "integer", "default": 44 },
            "bold": { "type": "boolean", "default": true }
          }
        },
        "subtitle": {
          "type": "object",
          "properties": {
            "name": { "type": "string", "default": "Arial" },
            "size": { "type": "integer", "default": 32 },
            "bold": { "type": "boolean", "default": false }
          }
        },
        "body": {
          "type": "object",
          "properties": {
            "name": { "type": "string", "default": "Arial" },
            "size": { "type": "integer", "default": 24 },
            "bold": { "type": "boolean", "default": false }
          }
        }
      }
    },
    "section": {
      "type": "object",
      "description": "A section groups related slides",
      "properties": {
        "title": {
          "type": "string",
          "description": "Section title (creates section header slide if provided)"
        },
        "slides": {
          "type": "array",
          "description": "Slides in this section",
          "items": {
            "$ref": "#/definitions/slide"
          }
        }
      },
      "required": ["slides"]
    },
    "slide": {
      "type": "object",
      "description": "A single slide",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "title",
            "section_header",
            "content",
            "two_content",
            "comparison",
            "image",
            "quote",
            "blank",
            "table",
            "process_flow",
            "comparison_matrix",
            "timeline",
            "key_value",
            "callout",
            "stats_grid",
            "cards_grid",
            "key_concept",
            "agenda",
            "divider",
            "data_viz",
            "image_grid"
          ],
          "description": "Slide layout type",
          "default": "content"
        },
        "title": {
          "type": "string",
          "description": "Slide title"
        },
        "content": {
          "type": "object",
          "description": "Slide content (structure varies by type)",
          "properties": {
            "subtitle": {
              "type": "string",
              "description": "Subtitle (for title/section_header slides)"
            },
            "bullets": {
              "type": "array",
              "items": { "type": "string", "maxLength": 100 },
              "maxItems": 6,
              "description": "Bullet points (for content slides). 6x6 rule: max 6 bullets recommended"
            },
            "left": {
              "type": "array",
              "items": { "type": "string", "maxLength": 100 },
              "maxItems": 6,
              "description": "Left column bullets (for two_content/comparison). 6x6 rule: max 6 items"
            },
            "right": {
              "type": "array",
              "items": { "type": "string", "maxLength": 100 },
              "maxItems": 6,
              "description": "Right column bullets (for two_content/comparison). 6x6 rule: max 6 items"
            },
            "left_title": {
              "type": "string",
              "description": "Left column header (for comparison)"
            },
            "right_title": {
              "type": "string",
              "description": "Right column header (for comparison)"
            },
            "image_path": {
              "type": "string",
              "description": "Path to image file (for image slides)"
            },
            "alt_text": {
              "type": "string",
              "description": "Image alt text for accessibility"
            },
            "text": {
              "type": "string",
              "description": "Quote text (for quote slides)"
            },
            "attribution": {
              "type": "string",
              "description": "Quote attribution (for quote slides)"
            },
            "headers": {
              "type": "array",
              "items": { "type": "string" },
              "maxItems": 6,
              "description": "Table column headers (for table slides)"
            },
            "rows": {
              "type": "array",
              "items": {
                "type": "array",
                "items": { "type": "string" }
              },
              "maxItems": 8,
              "description": "Table data rows (for table slides)"
            },
            "totals_row": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Optional totals row for table"
            },
            "steps": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "label": { "type": "string" },
                  "description": { "type": "string" }
                },
                "required": ["label"]
              },
              "maxItems": 6,
              "description": "Process steps (for process_flow slides)"
            },
            "flow_style": {
              "type": "string",
              "enum": ["horizontal", "vertical"],
              "default": "horizontal",
              "description": "Process flow direction"
            },
            "options": {
              "type": "array",
              "items": { "type": "string" },
              "maxItems": 4,
              "description": "Comparison options (for comparison_matrix)"
            },
            "criteria": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "values": {
                    "type": "array",
                    "items": { "type": "string" }
                  }
                },
                "required": ["name", "values"]
              },
              "maxItems": 8,
              "description": "Comparison criteria (for comparison_matrix)"
            },
            "highlight_option": {
              "type": "string",
              "description": "Option to highlight in comparison matrix"
            },
            "events": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "date": { "type": "string" },
                  "label": { "type": "string" },
                  "description": { "type": "string" }
                },
                "required": ["label"]
              },
              "maxItems": 6,
              "description": "Timeline events (for timeline slides)"
            },
            "pairs": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "key": { "type": "string" },
                  "value": { "type": "string" }
                },
                "required": ["key", "value"]
              },
              "maxItems": 6,
              "description": "Key-value pairs (for key_value slides)"
            },
            "callouts": {
              "type": "array",
              "items": { "$ref": "#/definitions/calloutItem" },
              "maxItems": 4,
              "description": "Callout boxes (for callout slides)"
            },
            "stats": {
              "type": "array",
              "items": { "$ref": "#/definitions/statItem" },
              "minItems": 2,
              "maxItems": 6,
              "description": "Statistics cards (for stats_grid slides)"
            },
            "stats_layout": {
              "type": "string",
              "enum": ["auto", "2x1", "3x1", "2x2", "3x2"],
              "default": "auto",
              "description": "Grid layout for stats_grid slides"
            },
            "cards": {
              "type": "array",
              "items": { "$ref": "#/definitions/cardItem" },
              "minItems": 2,
              "maxItems": 6,
              "description": "Content cards (for cards_grid slides)"
            },
            "cards_columns": {
              "type": "integer",
              "enum": [2, 3],
              "default": 2,
              "description": "Number of columns for cards_grid"
            },
            "concept_title": {
              "type": "string",
              "description": "The concept/term name (for key_concept slides)"
            },
            "definition": {
              "type": "string",
              "maxLength": 200,
              "description": "Definition text (for key_concept slides)"
            },
            "details": {
              "type": "array",
              "items": { "type": "string" },
              "maxItems": 4,
              "description": "Supporting details (for key_concept slides)"
            },
            "concept_style": {
              "type": "string",
              "enum": ["boxed", "highlighted", "minimal"],
              "default": "boxed",
              "description": "Visual style for key_concept slides"
            },
            "containers": {
              "type": "array",
              "items": { "$ref": "#/definitions/container" },
              "maxItems": 4,
              "description": "Inline container elements within content slides"
            },
            "agenda_items": {
              "type": "array",
              "items": { "$ref": "#/definitions/agendaItem" },
              "minItems": 2,
              "maxItems": 8,
              "description": "Agenda items (for agenda slides)"
            },
            "agenda_style": {
              "type": "string",
              "enum": ["numbered", "checkmarks", "progress_bar"],
              "default": "numbered",
              "description": "Visual style for agenda items"
            },
            "show_progress": {
              "type": "boolean",
              "default": true,
              "description": "Show progress bar for agenda"
            },
            "section_number": {
              "type": "string",
              "maxLength": 3,
              "description": "Section number display (for divider slides, e.g., '01', 'A')"
            },
            "divider_style": {
              "type": "string",
              "enum": ["bold", "minimal", "graphic", "numbered"],
              "default": "bold",
              "description": "Visual style for divider slides"
            },
            "accent_color": {
              "type": "string",
              "enum": ["primary", "secondary", "accent"],
              "default": "primary",
              "description": "Theme color accent (for divider slides)"
            },
            "chart_type": {
              "type": "string",
              "enum": ["column_clustered", "column_stacked", "bar_clustered", "bar_stacked", "line", "line_markers", "pie", "area", "area_stacked"],
              "description": "Type of chart (for data_viz slides)"
            },
            "chart_data": {
              "$ref": "#/definitions/chartData",
              "description": "Chart data with categories and series (for data_viz slides)"
            },
            "chart_title": {
              "type": "string",
              "description": "Optional title displayed on the chart itself"
            },
            "show_legend": {
              "type": "boolean",
              "default": true,
              "description": "Display chart legend"
            },
            "show_data_labels": {
              "type": "boolean",
              "default": false,
              "description": "Display values on chart elements"
            },
            "images": {
              "type": "array",
              "items": { "$ref": "#/definitions/gridImage" },
              "minItems": 2,
              "maxItems": 9,
              "description": "Images for grid layout (for image_grid slides)"
            },
            "grid_layout": {
              "type": "string",
              "enum": ["auto", "2x1", "1x2", "2x2", "3x1", "1x3", "3x2", "2x3", "3x3"],
              "default": "auto",
              "description": "Grid arrangement for images"
            },
            "image_fit": {
              "type": "string",
              "enum": ["contain", "cover", "fill"],
              "default": "contain",
              "description": "How images fit within grid cells"
            },
            "show_captions": {
              "type": "boolean",
              "default": true,
              "description": "Display captions below images"
            },
            "gap_size": {
              "type": "string",
              "enum": ["small", "medium", "large"],
              "default": "medium",
              "description": "Spacing between grid images"
            }
          }
        },
        "notes": {
          "type": "string",
          "description": "Speaker notes for this slide"
        }
      },
      "required": ["type"]
    },
    "calloutItem": {
      "type": "object",
      "description": "A callout box element",
      "properties": {
        "callout_type": {
          "type": "string",
          "enum": ["info", "tip", "warning", "success"],
          "default": "info",
          "description": "Visual style of the callout"
        },
        "heading": {
          "type": "string",
          "description": "Optional callout heading"
        },
        "text": {
          "type": "string",
          "maxLength": 200,
          "description": "Callout message text"
        }
      },
      "required": ["callout_type", "text"]
    },
    "statItem": {
      "type": "object",
      "description": "A statistic card element",
      "properties": {
        "value": {
          "type": "string",
          "description": "The prominent statistic value (e.g., '95%', '$1.2M')"
        },
        "label": {
          "type": "string",
          "description": "Description of the statistic"
        },
        "trend": {
          "type": "string",
          "enum": ["up", "down", "neutral", "none"],
          "default": "none",
          "description": "Optional trend indicator"
        },
        "highlight": {
          "type": "boolean",
          "default": false,
          "description": "Whether to highlight this stat"
        }
      },
      "required": ["value", "label"]
    },
    "cardItem": {
      "type": "object",
      "description": "A content card element",
      "properties": {
        "title": {
          "type": "string",
          "description": "Card title"
        },
        "items": {
          "type": "array",
          "items": { "type": "string" },
          "maxItems": 4,
          "description": "Bullet points within the card"
        },
        "color": {
          "type": "string",
          "enum": ["default", "primary", "secondary", "accent"],
          "default": "default",
          "description": "Card accent color"
        }
      },
      "required": ["title"]
    },
    "container": {
      "type": "object",
      "description": "An inline container element for mixed content",
      "properties": {
        "container_type": {
          "type": "string",
          "enum": ["callout", "stat_box", "card", "concept_block"],
          "description": "Type of container"
        },
        "callout": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["info", "tip", "warning", "success"],
              "default": "info"
            },
            "text": {
              "type": "string",
              "maxLength": 150
            }
          },
          "required": ["text"]
        },
        "stat_box": {
          "type": "object",
          "properties": {
            "value": { "type": "string" },
            "label": { "type": "string" },
            "trend": {
              "type": "string",
              "enum": ["up", "down", "neutral", "none"],
              "default": "none"
            }
          },
          "required": ["value", "label"]
        },
        "card": {
          "type": "object",
          "properties": {
            "title": { "type": "string" },
            "items": {
              "type": "array",
              "items": { "type": "string" },
              "maxItems": 4
            },
            "color": {
              "type": "string",
              "enum": ["default", "primary", "secondary", "accent"],
              "default": "default"
            }
          },
          "required": ["title"]
        },
        "concept_block": {
          "type": "object",
          "properties": {
            "term": { "type": "string" },
            "definition": {
              "type": "string",
              "maxLength": 100
            }
          },
          "required": ["term", "definition"]
        }
      },
      "required": ["container_type"]
    },
    "agendaItem": {
      "type": "object",
      "description": "An agenda item with status tracking",
      "properties": {
        "section": {
          "type": "string",
          "maxLength": 60,
          "description": "Section/topic name"
        },
        "description": {
          "type": "string",
          "maxLength": 100,
          "description": "Optional description or duration"
        },
        "status": {
          "type": "string",
          "enum": ["complete", "current", "upcoming"],
          "default": "upcoming",
          "description": "Progress status of this item"
        }
      },
      "required": ["section"]
    },
    "chartData": {
      "type": "object",
      "description": "Data for chart visualization",
      "properties": {
        "categories": {
          "type": "array",
          "items": { "type": "string" },
          "maxItems": 12,
          "description": "Category labels (x-axis)"
        },
        "series": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "description": "Series name (legend label)"
              },
              "values": {
                "type": "array",
                "items": { "type": "number" },
                "description": "Data values matching categories"
              }
            },
            "required": ["name", "values"]
          },
          "minItems": 1,
          "maxItems": 6,
          "description": "Data series (max 6 for readability)"
        }
      },
      "required": ["categories", "series"]
    },
    "gridImage": {
      "type": "object",
      "description": "An image in the grid layout",
      "properties": {
        "path": {
          "type": "string",
          "description": "Path to image file"
        },
        "caption": {
          "type": "string",
          "maxLength": 50,
          "description": "Caption text below image"
        },
        "alt_text": {
          "type": "string",
          "description": "Accessibility description"
        }
      },
      "required": ["path"]
    }
  }
}
