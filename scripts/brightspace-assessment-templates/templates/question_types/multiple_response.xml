<!--
    QTI Multiple Response Question Template
    cc_profile: cc.multiple_response.v0p1

    Multi-select question where multiple answers can be correct.
    Uses response_lid with rcardinality="Multiple"
    Student must select ALL correct answers and NONE of the incorrect ones.

    Placeholders:
    - {ITEM_ID}: Unique item identifier
    - {ITEM_TITLE}: Optional question title/description
    - {POINTS}: Question point value (cc_weighting)
    - {QUESTION_TEXT}: HTML-escaped question text
    - {RESPONSE_ID}: Unique response identifier
    - {CHOICES}: Response label elements (see CHOICE template)
    - {CORRECT_CONDITIONS}: <and> block with varequal for correct and <not> for incorrect
    - {FEEDBACK}: General feedback text (HTML-escaped)
    - {CHOICE_FEEDBACKS}: Individual feedback blocks for each choice

    CHOICE template:
    <response_label ident="{CHOICE_ID}">
      <material><mattext texttype="text/html">{CHOICE_TEXT}</mattext></material>
    </response_label>

    CORRECT_CONDITIONS example (choices A and B correct, C and D incorrect):
    <and>
      <varequal respident="{RESPONSE_ID}">{CHOICE_A_ID}</varequal>
      <varequal respident="{RESPONSE_ID}">{CHOICE_B_ID}</varequal>
      <not><varequal respident="{RESPONSE_ID}">{CHOICE_C_ID}</varequal></not>
      <not><varequal respident="{RESPONSE_ID}">{CHOICE_D_ID}</varequal></not>
    </and>
-->
      <item ident="{ITEM_ID}" title="{ITEM_TITLE}">
        <itemmetadata>
          <qtimetadata>
            <qtimetadatafield>
              <fieldlabel>cc_profile</fieldlabel>
              <fieldentry>cc.multiple_response.v0p1</fieldentry>
            </qtimetadatafield>
            <qtimetadatafield>
              <fieldlabel>cc_weighting</fieldlabel>
              <fieldentry>{POINTS}</fieldentry>
            </qtimetadatafield>
          </qtimetadata>
        </itemmetadata>
        <presentation>
          <material>
            <mattext texttype="text/html">{QUESTION_TEXT}</mattext>
          </material>
          <response_lid ident="{RESPONSE_ID}" rcardinality="Multiple">
            <render_choice>
{CHOICES}
            </render_choice>
          </response_lid>
        </presentation>
        <resprocessing>
          <outcomes>
            <decvar minvalue="0" maxvalue="100" varname="SCORE" vartype="Decimal"/>
          </outcomes>
          <respcondition continue="No">
            <conditionvar>
              {CORRECT_CONDITIONS}
            </conditionvar>
            <setvar action="Set" varname="SCORE">100</setvar>
          </respcondition>
          <respcondition continue="Yes">
            <conditionvar>
              <other/>
            </conditionvar>
            <displayfeedback feedbacktype="Response" linkrefid="general_fb"/>
          </respcondition>
{CHOICE_FEEDBACKS}
        </resprocessing>
        <itemfeedback ident="general_fb">
          <flow_mat>
            <material>
              <mattext texttype="text/html">{FEEDBACK}</mattext>
            </material>
          </flow_mat>
        </itemfeedback>
      </item>
